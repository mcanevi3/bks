\chapter{Ayrıklaştırma}
Türevin geometrik yorumu 
\begin{equation}
    \frac{dy(t)}{dt}\approx\frac{\Delta y}{\Delta t}
\end{equation}
olmak üzere
\begin{equation}
\begin{split}
    \frac{dy(t)}{dt}&\approx\frac{\Delta y}{\Delta t}\\
    &\approx\frac{y((k+1)T)-y(kT)}{(k+1)T-kT}\\
    &\approx\frac{y((k+1)T)-y(kT)}{T}
\end{split}
\end{equation}
elde edilir. Ayrık bir sinyalin türevi ardışık değerler farkının örnekleme zamanına oranı ile hesaplanabilmektedir. Örneğin, $y(kT)=\sin(kT)$ ve $T=0.1$ olmak üzere
\begin{equation}
    \frac{y((k+1)T)-y(kT)}{T}=10(\sin((k+1)0.1)-\sin(0.1k))
\end{equation}
ve dolayısıyla
\begin{equation}
\begin{split}
    \{10\sin(0.1),10(\sin(0.2)-\sin(0.1)),10(\sin(0.3)-\sin(0.2)),\cdots\}\\
    \{0.9983,0.9884, 0.9685,\cdots\}
\end{split}
\end{equation}
elde edilir. $y(kT)=\sin(kT)$ sinyalinin türevinin $\frac{d\sin(t)}{dt}=\cos(t)$ olduğu bilindiğinden
\begin{equation}
    \begin{split}
        \{cos(0.1),cos(0.2),cos(0.3),\cdots\}\\
        \{ 0.9950,0.9801,0.9553,\cdots\}
    \end{split}
\end{equation}
elde edilir ve ayrık türev ile benzer değerler olduğu görülmektedir. Bu yaklaşıklığın türeve yakınsaması için örnekleme zamanı $T$ daha küçük seçilmelidir. 
\begin{equation}
    \frac{dq(t)}{dt}=x
\end{equation}
olmak üzere
\begin{equation}
\begin{split}
    \frac{dq(t)}{dt}&=x\\
    dq(t)&=xdt\\
    \int dq(t)&=\int xdt\\
    q(t)&=\int xdt
\end{split}
\end{equation}
elde edilir. Buradan hareketle,
\begin{equation}
    \begin{split}
        \frac{\Delta q}{\Delta t}&=x\\
        \frac{q((k+1)T)-q(kT)}{(k+1)T-kT}&=x\\
        \frac{q((k+1)T)-q(kT)}{T}&=x\\
        q((k+1)T)-q(kT)&=xT\\
        q((k+1)T)&=q(kT)+xT
    \end{split}
\end{equation}
ifadesi bulunur. Ayrık zamanda integral birikimli toplama karşılık gelmektedir. Bu karşılıklar Zero Order Hold(ZOH) ile elde edilmiştir. ZOH örnekleme zamanı boyunca değerlerin sabit olduğu varsayımına dayanmaktadır. Bu durum
\begin{equation}
    x(t)=x(kT),\quad kT\leq t\leq (k+1)T
\end{equation}
ile ifade edilebilir. ZOH için transfer fonksiyonu elde etmek amacıyla girişe $\delta(t)$ birim darbe fonksiyonu uygulanırsa çıkışında $u(t)-u(t-T)$ elde edilir. Bu durumda S tanım bölgesinde çıkış ifadesi
\begin{equation}
\begin{split}
    \mathcal{L}\{u(t)-u(t-T)\}&=\mathcal{L}\{u(t)\}-\mathcal{L}\{u(t-T)\}\\
    &=\mathcal{L}\{u(t)\}-e^{-sT}\mathcal{L}\{u(t)\}\\
    &=\frac{1}{s}-e^{-sT}\frac{1}{s}\\
    &=(1-e^{-sT})\frac{1}{s}
\end{split}
\end{equation}
şeklindedir. ZOH transfer fonksiyonu ile bir $G(s)$ sistemi birlikte Z dönüşümü yapılmalıdır. Örneğin,
\begin{equation}
    G(s)=\frac{1}{s+1}
    \label{eqn:ornek_sistem}
\end{equation}
sistemi ayrıklaştırılmak istensin. Bu durumda $G_{ZOH}(s)G(s)$ ayrıklaştırılmalıdır. Bu sebeple,
\begin{equation}
    L(s)=G_{ZOH}(s)G(s)=\frac{1-e^{-sT}}{s(s+1)}
\end{equation}
ifadesi Z tanım bölgesine
\begin{equation}
\begin{split}
    \mathcal{Z}\{L(s)\}&=\mathcal{Z}\left\{\frac{1-e^{-sT}}{s(s+1)}\right\}\\
    &=\mathcal{Z}\{1-e^{-sT}\} \mathcal{Z}\left\{\frac{1}{s(s+1)} \right\}\\
    &=(1-z^{-1}) \left(\mathcal{Z}\left\{\frac{1}{s}-\frac{1}{s+1} \right\}\right)\\
    &=\left(1-\frac{1}{z}\right) \left(\mathcal{Z}\left\{\frac{1}{s}\right\}-\mathcal{Z}\left\{\frac{1}{s+1} \right\}\right)\\
    &=\frac{z-1}{z} \left(\frac{z}{z-1}-\frac{z}{z-e^{-1}}\right)\\
    &=\left(1-\frac{z-1}{z-e^{-1}}\right)\\
    &=\frac{1-e^{-1}}{z-e^{-1}}
\end{split}
\end{equation}
olarak dönüştürülür.

First Order Hold(FOH) yöntemi ise
\begin{equation}
    x(t)=x(kT)+\frac{t-kT}{T}(x((k+1)T)-x(kT)),\quad kT\leq t\leq (k+1)T
\end{equation}
olarak tanımlanır. Eşitliğin sağ tarafı $t=kT$ için $x(kT)$, $t=(k+0.5)T$ için 
\begin{equation}
\begin{split}
    x(t)&=x(kT)+\frac{t-kT}{T}(x((k+1)T)-x(kT)),\quad kT\leq t\leq (k+1)T\\
    &=x(kT)+\frac{kT+0.5T-kT}{T}(x((k+1)T)-x(kT))\\
    &=x(kT)+0.5(x((k+1)T)-x(kT))\\
    &=x(kT)+0.5x((k+1)T)-0.5x(kT)\\
    &=0.5x((k+1)T)+0.5x(kT)
\end{split}
\end{equation}
ve $t=(k+1)T$ için ise 
\begin{equation}
    \begin{split}
        x(t)&=x(kT)+\frac{t-kT}{T}(x((k+1)T)-x(kT)),\quad kT\leq t\leq (k+1)T\\
        x(t)&=x(kT)+\frac{(k+1)T-kT}{T}(x((k+1)T)-x(kT))\\
        x(t)&=x(kT)+x((k+1)T)-x(kT)\\
        x(t)&=x((k+1)T)
    \end{split}
\end{equation}
olarak elde edilir. Görüldüğü üzere ZOH yönteminin aksine $T$ süre boyunca değerler değişmektedir. FOH için birim darbe yanıtı
\begin{equation}
    x(t)=\begin{cases}
        t+\frac{1}{T} & 0\leq t\leq \frac{1}{T}\\
        -t+\frac{1}{T} & \frac{1}{T}\leq t\leq \frac{2}{T}\\
        0 & t>\frac{2}{T}
    \end{cases}
\end{equation}
ve işlem kolaylığı açısından $T=1$ alınırsa 
\begin{equation}
    x(t)=(1-t)u(2-t)+2tu(1-t)
\end{equation}
şeklindedir. S dönüşümü sonucu
\begin{equation}
\begin{split}
    \mathcal{L}\{x(t)\}&=\mathcal{L}\{(1-t)u(2-t)\}+\mathcal{L}\{2tu(1-t)\}\\
    &=\mathcal{L}\{(1-t)(1-u(t-2))\}+\mathcal{L}\{2t(1-u(t-1))\}\\
    &=\mathcal{L}\{(1-t)\}-\mathcal{L}\{(1-t)u(t-2)\}+\mathcal{L}\{2t\}-\mathcal{L}\{2tu(t-1)\}\\
    &=\mathcal{L}\{(1+t)\}+\mathcal{L}\{(t-1)u(t-2)\}-\mathcal{L}\{2tu(t-1)\}\\
    &=\mathcal{L}\{(1+t)\}+\mathcal{L}\{(t-1)u(t-2)\}-\mathcal{L}\{(2t-2+2)u(t-1)\}\\
    &=\mathcal{L}\{(1+t)\}+\mathcal{L}\{(t-1-1+1)u(t-2)\}-\mathcal{L}\{(2t-2+2)u(t-1)\}\\
    &=\mathcal{L}\{(1+t)\}+\mathcal{L}\{(t-2)u(t-2)+u(t-2)\}-\mathcal{L}\{(2t-2)u(t-1)+2u(t-1)\}\\
    &=\frac{1}{s}+\frac{1}{s^2}+\frac{e^{-2s}}{s^2}+\frac{e^{-2s}}{s}-2\frac{e^{-s}}{s^2}-\frac{2e^{-s}}{s}\\
    &=\frac{1-2e^{-s}+e^{-2s}}{s}+\frac{1-2e^{-s}+e^{-2s}}{s^2}\\
    &=\frac{(1-e^{-s})^2}{s}+\frac{(1-e^{-s})^2}{s^2}\\
    &=\frac{(1-e^{-s})^2}{s^2}(s+1)\\
\end{split}
\end{equation}
elde edilir. FOH için transfer fonksiyonu
\begin{equation}
    \begin{split}
        G_{FOH}(s)&=\frac{(1-e^{-s})^2}{T^2s^2}\frac{Ts+1}{T}\\
        &=G_{ZOH}^2(s)\frac{Ts+1}{T}
\end{split}
\end{equation}
şeklindedir. Örneğin daha önce Denklem~\ref{eqn:ornek_sistem} ile verilen sistemi FOH yöntemi ve yine aynı örnekleme zamanı ile ayrıklaştırmak gerekirse
\begin{equation}
\begin{split}
    L(s)&=\frac{1}{s+1}G_{FOH}(s)\\
    &=\frac{1}{s+1}\frac{(1-e^{-s})^2}{T^2s^2}\frac{Ts+1}{T}\\
    &=\frac{1}{s+1}\frac{(1-e^{-s})^2}{s^2}(s+1)\\
    &=\frac{(1-e^{-s})^2}{s^2}
\end{split}
\end{equation}
ifadesi Z dönüşümüne tabi tutulmalıdır. Dolayısıyla,
\begin{equation}
    \begin{split}
        G(z)&=\mathcal{Z}\left\{\frac{(1-e^{-s})^2}{s^2}\right\}\\
        &=\mathcal{Z}\{(1-e^{-s})^2\}\mathcal{Z}\left\{\frac{1}{s^2}\right\}\\
        &=\left(1-z^{-1}\right)^2\frac{Tz}{(z-1)^2}\\
        &=\left(\frac{z-1}{z}\right)^2\frac{z}{(z-1)^2}\\
        &=\frac{1}{z}
    \end{split}
\end{equation}
elde edilir. Görüldüğü üzere, birim gecikme elde edilmiştir.